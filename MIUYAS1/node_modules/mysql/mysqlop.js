/**
 * Created by Administrator on 2016/9/5.
 */
var connection=require("./connection").conn;

connection.connect(function(err){
    if(err){
        console.info("数据库连接失败");
    }else{
        insertData();//如果连接成功，则添加数据
    }
})

function insertData(){
    var sqlStr="";
    for(var i=1;i<=4;i++){
        sqlStr+="insert into stuInfo values(0,'花花_"+i+"',1002,'男',"+(20+i)+",'aaa','13575298146"+i+"');"

    }
    //console.info(sqlStr);
    connection.query(sqlStr,function(err,result){//query()   插入数据库语句
        if(err){
            console.info("学生信息表添加失败");
            connection.end();
        }else{
            updataData();
            //如果成功，则更新数据
        }
    })
}


function updataData(){
    connection.query("update stuInfo set sname=?  where sid=?",['胖胖',10005],function(err,result){
        if(err){
            console.info("学生信息更新失败");
            connection.end();
        }else{
            findData();//如果成功则查询数据
        }
    })
}

function findData(){
    connection.query("select * from stuInfo",function(err,result){
        if(err){
            console.info("学生信息查询失败");
            connection.end();
        }else{
            console.info(result);
            connection.end();
        }
    })
}